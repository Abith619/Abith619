<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="patient_bils_view" model="ir.ui.view">
        <field name="name">patient_bills_view</field>
        <field name="model">patient.bills</field>
        <field name="arch" type="xml">
            <form string="Patient Bills">
                <header >
                    <button name="invoice_button" type="object" string="Create Invoice" class="oe_highlight"/>
                </header>             
                <sheet> 
                    <group>
                        <group>
                        <field name ="ebook_id"/>
                            <field name ="patient_name"/>
                            <field name ="date_date"/> 
                            <field name= "doctor_id" invisible='1'/>
                            <field name= "billed_by"/>
                        </group>
                        <group>
                        <field name ="journal_id"/>
                            <field name ="insurance"/>
                            <field name = "type_of_insurance" attrs="{'invisible': [('insurance','=', False)]}"/>
                            <field name="payment_type"/>
                            <field name="payment_id"/>
                        <field name= 'company_id' options="{'no_quick_create':True,'no_create_edit':True,'no_open': True,}"/>
                        <field name='total_amount' string='Due Amount' force_save='1'/>
                        <field name="paid_status"/>
                        </group>
                    </group>

                    
                    <notebook>
                        <page string ="Reception">
                            <field name="reception_bills">
                                <tree editable="bottom">
                                    <field name="name"/>
                                    <field name ="date"/>
                                    <field name ="bill_amount"/>
                                    <field name ="payment_status"/>
                                </tree>
                            </field>
                            <div class ="col-md-2" style="display: flex; align-items: flex-start; justify-content: center;">
                                <label for="total2" string="Registration Fees : " />
                                <field name ="total2"/>
                            </div>
                            </page>
                            <page string ="Lab / Scan">
                                <notebook>
                                <page string ="Lab Bill">
                                    <field name="lab_bill">
                                        <tree editable="bottom">
                                            <field name="name" string='Test Name'/>
                                            <field name ="test_name" invisible='1'/>
                                            <field name ="test_types" invisible='1'/>
                                            <field name ="bill_amount"/>
                                            <field name ="date"/>
                                            <field name ="payment_status"/>
                                        </tree>
                                    </field>
                                    <div class ="col-md-2" style="display: flex; align-items: flex-start; justify-content: center;">
                                        <label for="total" string="Lab Amount : " />
                                        <field name ="total"/>
                                    </div>
                                    </page>
                                    <page string ="Scan Bill">
                                    <field name="scan_bill">
                                        <tree editable="bottom">
                                            <field name="name" string='Test Name'/>
                                            <field name ="test_name" invisible='1'/>
                                            <field name ="test_types" invisible='1'/>
                                            <field name ="bill_amount"/>
                                            <field name ="date"/>
                                            <field name ="payment_status"/>
                                        </tree>
                                    </field>
                                    <div class ="col-md-2" style="display: flex; align-items: flex-start; justify-content: center;">
                                        <label for="total_scan" string="Scan Amount : " />
                                        <field name ="total_scan"/>
                                    </div>
                                    </page>
                                    </notebook>
                                </page>
        
                        <page string ="Pharmacy">
                            <field name="pres_bill">
                                <tree editable="bottom">
                                    <field name="prescription_id"/>
                                    <field name="medicine_name" />
                                    <field name ="date"/>
                                    <field name ="pre_amount"/>
                                    <field name ="delivery_mode"/>
                                    <field name ="gst_tax" widget='many2many_tags'/>
                                </tree>
                            </field>

                            <group> 
<group>      <field name='total2' readonly='1' force_save='1' string="Registration Fees : "/> </group>
<group>        <field name='total1' readonly='1' force_save='1' string="Medicine Amount :"/> </group> 
<group>  <field name='discounted' force_save='1' string="Discount :"/></group>
<group> <field name='discounted_total' force_save='1'/></group> 
<group>       <field name='total' readonly='1' force_save='1'  string="Lab Amount :" /> </group>                           
<group>        <field name='total_tax' readonly='1' force_save='1'  string="Tax Amount:" /> </group> 
<group>         <field name='total_scan' readonly='1' force_save='1' string="Scan Amount :" /> </group> 
<group>        <field name='gst_total_tax' readonly='1' force_save='1' string="Medicine Amount With Tax "/> </group> 

                            </group> 

<group>       <field name='billed_amount' readonly='1' force_save='1'  string="Total Amount : "/> </group>    

                        </page>
                    </notebook>
 
                
                </sheet>
                </form>
                </field>
                </record>
        <!--Search View-->

<record id="view_bill_land_filter" model="ir.ui.view">
    <field name="name">Bills</field>
    <field name="model">patient.bills</field>
    <field name="type">search</field>
    <field name="arch" type="xml">
        <search string="Search">
            <!-- <field name="opnumber"/> -->
            <field name="patient_name"/>
            <field name="ebook_id"/>
        <!-- <filter string="Doctor" name="doctor" domain="[('doctor', '!=', '')]"/> -->
            <filter string="Doctor" name="doctor_id" context="{'group_by': 'doctor_id'}"/>
            <!-- <filter string="Branch" name="company_id" context="{'group_by': 'company_id'}"/> -->
            <filter string="Today" name="write_date" separator="1" domain="[('write_date','=',(datetime.date.today().strftime('%Y-%m-%d')))]"/>
            <filter string="Yesterday" name="write_date" separator="1" domain="[('write_date','=',(datetime.date.today()-relativedelta(days=1)).strftime('%Y-%m-%d'))]"/>
            <!-- <filter string="Tomorrow" name="write_date" separator="1" domain="[('write_date','=',(datetime.date.today()+relativedelta(days=1)).strftime('%Y-%m-%d'))]"/> -->
            
            <filter string="Past 6 Month" name="write_date" separator="1" domain="[('write_date','&lt;=',(datetime.date.today()-relativedelta(months=6)).strftime('%Y-%m-%d'))]"/>
            <!-- <filter string="Next Month" name="prescription_date" separator="1" domain="[('prescription_date','&gt;=',(datetime.date.today()+relativedelta(day=31)).strftime('%Y-%m-%d'))]"/> -->
            <filter string="Past Month" name="write_date" separator="1" domain="[('write_date','&lt;=',(datetime.date.today()-relativedelta(months=1)).strftime('%Y-%m-%d'))]"/>
          
        </search>
    </field>
</record>

        <record id="patient_bils_tree_view" model="ir.ui.view">
                    <field name="name">patient_bills_tree_view</field>
                    <field name="model">patient.bills</field>
                    <field name="arch" type="xml">
                        <tree string="Patient Bills">
                            <field name='ebook_id'/>
                            
                            <field name="patient_name"/>
                            <field name="doctor_id"/>
                            <field name="billed_amount"/>
                            <field name='total_amount' string='Due Amount'/>
                            <field name="write_date"/>
                            <field name="paid_status"/>
                        </tree>
                    </field>
                </record>


                <record id="bills_action_views" model="ir.actions.act_window">
                    <field name="name">Bill Information</field>
                    <field name="res_model">patient.bills</field>
                    <field name="binding_view_types">form</field>
                    <field name="view_mode">tree,form,pivot,graph</field>
                </record>

                <!-- <menuitem id= "bill_menus_hospital" name ="Billing" parent="main_menu_hospital_management"
                sequence="6"/> -->


                <menuitem id="hospital_menu_bill" name="Billing"  parent="main_menu_hospital_management"
                sequence="6"/>


            <menuitem id="patient_bills"  name ="Bills" action="bills_action_views"
                parent="hospital_menu_bill"/>

            <!-- <record id="Cashier_form" model="ir.ui.view">
                <field name="name">Cashier</field>
                <field name="model">account.payment</field>
                <field name="inherit_id" ref="account.view_account_payment_form"/>
                <field name="priority" eval="8" />
                    <field name="arch" type="xml">
                        <form string="Cashier">
                            <header>
                            </header>
                            <sheet>
                                <div class="oe_button_box">
                                </div>
                                <group >
                                    <field name ="partner_id"/>
                                    <field name ="name"/>
                                    <field name ="date"/>
                                    
                                    <field name ="company_id"/>
                                    <field name ="amount"/>
                                </group>
                            </sheet>
                            </form>
                            </field>
            </record>
            <record model="ir.actions.act_window" id="cashier_action">            
                <field name="name">Cashier</field>         
                    <field name="res_model">account.payment</field>           
                    <field name="view_mode">tree,form</field>
                    <field name="domain">[]</field>            
                    <field name="help" type="html">                
                        <p class="oe_view_nocontent_create">Cashier
                        </p>            
                    </field>        
                </record>-->
            <menuitem id="menu_Cashier" name="Cashier" parent= "hospital_menu_bill" 
            action="account.action_account_payments"/> 

    </odoo>
